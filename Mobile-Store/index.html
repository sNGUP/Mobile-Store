<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mobile Store</title>
  <link rel="icon" type="imag/png" href="images/iconlogo.png">
  <link rel="stylesheet" href="CSS/style.css">
</head>
<body>
  <header class="header">
    <div class="top-banner">
      Special offers on all phones! Up to 30% OFF 
      <a href="#offers">Shop Now</a>
    </div>

    <div class="main-header">
      <div class="logo" onclick="goToHome()">
        <img src="../images/mobile_logo.png" alt="Mobile Store Logo">
      </div>

      <div class="search-container">
        <input type="text" class="search-box" id="searchInput" placeholder="Search for your favorite phone...">
        <button class="search-btn" onclick="searchProducts()">
          <svg viewBox="0 0 24 24">
            <circle cx="11" cy="11" r="8"/>
            <path d="m21 21-4.35-4.35"/>
          </svg>
        </button>
      </div>

      <div class="header-actions">
        <button class="action-btn" title="Wishlist" onclick="toggleWishlist()">
          <svg viewBox="0 0 24 24">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
          </svg>
          <span class="badge" id="wishlistCount">0</span>
        </button>

        <button class="action-btn" title="Shopping Cart" onclick="toggleCart()">
          <svg viewBox="0 0 24 24">
            <circle cx="9" cy="21" r="1"/>
            <circle cx="20" cy="21" r="1"/>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
          </svg>
          <span class="badge" id="cartCount">0</span>
        </button>
        
        <button class="action-btn" title="My Account" onclick="goToAccount()">
          <svg viewBox="0 0 24 24">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
            <circle cx="12" cy="7" r="4"/>
          </svg>
        </button>

        <button class="mobile-menu-btn" onclick="toggleMenu()">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
    </div>

    <nav class="nav-menu" id="navMenu">
      <a class="nav-link active" data-category="all">Home</a>
      <a class="nav-link" data-category="all">All Phones</a>
      <a class="nav-link" data-category="apple">Apple</a>
      <a class="nav-link" data-category="samsung">Samsung</a>
      <a class="nav-link" data-category="xiaomi">Xiaomi</a>
      <a class="nav-link" data-category="deals">Hot Deals</a>
    </nav>
  </header>

  <main class="main-content">
    <div class="section-header">
      <h1 id="sectionTitle">Featured Phones</h1>
      <p id="sectionDesc">Discover the latest smartphones with amazing features and competitive prices</p>
    </div>

    <div class="products-grid" id="productsGrid"></div>
  </main>

  <div class="popup-overlay" id="wishlistPopup" onclick="closePopupOutside(event, 'wishlistPopup')">
    <div class="popup-content" onclick="event.stopPropagation()">
      <div class="popup-header">
        <h2>
          <svg style="width: 24px; height: 24px; stroke: #ef4444; fill: #ef4444; stroke-width: 2;" viewBox="0 0 24 24">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
          </svg>
          My Wishlist
        </h2>
        <button class="close-popup" onclick="closePopup('wishlistPopup')">
          <svg viewBox="0 0 24 24">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="popup-body" id="wishlistItems"></div>
    </div>
  </div>

  <div class="popup-overlay" id="cartPopup" onclick="closePopupOutside(event, 'cartPopup')">
    <div class="popup-content" onclick="event.stopPropagation()">
      <div class="popup-header">
        <h2>
          <svg style="width: 24px; height: 24px; stroke: #2563eb; stroke-width: 2; fill: none;" viewBox="0 0 24 24">
            <circle cx="9" cy="21" r="1"/>
            <circle cx="20" cy="21" r="1"/>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
          </svg>
          Shopping Cart
        </h2>
        <button class="close-popup" onclick="closePopup('cartPopup')">
          <svg viewBox="0 0 24 24">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="popup-body" id="cartItems"></div>
    </div>
  </div>

  <div class="popup-overlay" id="accountPopup" onclick="closePopupOutside(event, 'accountPopup')">
    <div class="popup-content" onclick="event.stopPropagation()">
      <div class="popup-header">
        <h2>
          <svg style="width: 24px; height: 24px; stroke: #2563eb; stroke-width: 2; fill: none;" viewBox="0 0 24 24">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
            <circle cx="12" cy="7" r="4"/>
          </svg>
          My Account
        </h2>
        <button class="close-popup" onclick="closePopup('accountPopup')">
          <svg viewBox="0 0 24 24">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="popup-body">
        <div class="auth-tabs">
          <button class="auth-tab active" onclick="switchAuthTab('signin')">Sign In</button>
          <button class="auth-tab" onclick="switchAuthTab('signup')">Create Account</button>
        </div>

        <!-- Sign In Form -->
        <form class="auth-form active" id="signinForm" onsubmit="handleSignIn(event)">
          <div class="form-group">
            <label>Email Address</label>
            <input type="email" placeholder="Enter your email" required>
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="password" placeholder="Enter your password" required>
          </div>
          <button type="submit" class="form-submit-btn">Sign In</button>
          <div class="form-footer">
            <a href="#" style="color: #2563eb; text-decoration: none; font-weight: 600;">Forgot Password?</a>
          </div>
          <div class="divider">OR</div>
          <div class="social-login">
            <button type="button" class="social-btn" onclick="socialLogin('google')">
              <svg style="width: 20px; height: 20px;" viewBox="0 0 24 24">
                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
              </svg>
              Google
            </button>
            <button type="button" class="social-btn" onclick="socialLogin('facebook')">
              <svg style="width: 20px; height: 20px; fill: #1877F2;" viewBox="0 0 24 24">
                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
              </svg>
              Facebook
            </button>
          </div>
        </form>

        <!-- Sign Up Form -->
        <form class="auth-form" id="signupForm" onsubmit="handleSignUp(event)">
          <div class="form-group">
            <label>Full Name</label>
            <input type="text" placeholder="Enter your full name" required>
          </div>
          <div class="form-group">
            <label>Email Address</label>
            <input type="email" placeholder="Enter your email" required>
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="password" placeholder="Create a password" required minlength="6">
          </div>
          <div class="form-group">
            <label>Confirm Password</label>
            <input type="password" placeholder="Confirm your password" required minlength="6">
          </div>
          <button type="submit" class="form-submit-btn">Create Account</button>
          <div class="form-footer">
            By creating an account, you agree to our Terms & Conditions
          </div>
          <div class="divider">OR</div>
          <div class="social-login">
            <button type="button" class="social-btn" onclick="socialLogin('google')">
              <svg style="width: 20px; height: 20px;" viewBox="0 0 24 24">
                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
              </svg>
              Google
            </button>
            <button type="button" class="social-btn" onclick="socialLogin('facebook')">
              <svg style="width: 20px; height: 20px; fill: #1877F2;" viewBox="0 0 24 24">
                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
              </svg>
              Facebook
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- ====== FIREBASE SDK ====== -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { 
      getAuth, 
      createUserWithEmailAndPassword, 
      signInWithEmailAndPassword, 
      GoogleAuthProvider, 
      FacebookAuthProvider, 
      signInWithPopup, 
      onAuthStateChanged, 
      signOut 
    } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';

    const firebaseConfig = {
      apiKey: "AIzaSyAX0ZbKgNoiQuPkrDjPYdW4d3MXbRzibNg",
      authDomain: "mobile-store-76d60.firebaseapp.com",
      projectId: "mobile-store-76d60",
      storageBucket: "mobile-store-76d60.firebasestorage.app",
      messagingSenderId: "92732043159",
      appId: "1:92732043159:web:96083c907b065fc37b5ed2",
      measurementId: "G-LC1Q9TMRYZ"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    
    window.firebaseAuth = auth;
    window.createUserWithEmailAndPassword = createUserWithEmailAndPassword;
    window.signInWithEmailAndPassword = signInWithEmailAndPassword;
    window.GoogleAuthProvider = GoogleAuthProvider;
    window.FacebookAuthProvider = FacebookAuthProvider;
    window.signInWithPopup = signInWithPopup;
    window.onAuthStateChanged = onAuthStateChanged;
    window.signOut = signOut;

    onAuthStateChanged(auth, (user) => {
      if (user) {
        console.log('User logged in:', user.email);
        updateUIForLoggedInUser(user);
        
      } else {
        console.log('User logged out');
        updateUIForLoggedOutUser();
      }
    });
  </script>
  
  <script src="JS/main.js"></script>
</body>

</html>
